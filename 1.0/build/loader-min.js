/*!build time : 2014-03-21 12:54:40 PM*/
KISSY.add("gallery/amapUtils/1.0/loader",function(a,b){function c(b){c.superclass.constructor.call(this,b),a.isPlainObject(b)?a.isString(b.key)&&""!=b.key?this.set("config",a.mix(this.get("config"),b,!0,void 0,!0)):a.error("\u3010Amap.Loader\u3011\u5b9e\u4f8b\u5316\u5931\u8d25\uff08key\u65e0\u6548\uff09"):a.error("\u3010Amap.Loader\u3011\u5b9e\u4f8b\u5316\u5931\u8d25\uff08\u53c2\u6570\u9519\u8bef\uff09")}return a.extend(c,b,{load:function(b){var c=this,d="mapInit_"+this.get("id")+"_"+a.guid(),e=window.AMap;window[d]=function(){c.set("namespace",window.AMap),a.isFunction(b)&&b()},e?window[d](e):a.getScript(a.substitute("http://webapi.amap.com/maps?v=1.2&key={key}&callback={callback}",{key:this.get("config").key,callback:d}))}},{ATTRS:{config:{value:{key:""},validator:function(b){return a.isPlainObject(b)&&a.isString(b.key)}},namespace:{value:null},id:{value:a.guid(),validator:function(){return!1}}}}),c},{requires:["base"]});